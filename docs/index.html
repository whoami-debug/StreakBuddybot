<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>StreakBuddy</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style>*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,sans-serif}body{background:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),url("https://images.unsplash.com/photo-1544829099-b9a0c07fad1a?q=80&w=1920") center/cover no-repeat fixed;color:#fff;min-height:100vh}.container{max-width:800px;margin:0 auto;padding:20px}.header{text-align:center;margin-bottom:40px;padding:20px;background:rgba(255,87,34,.2);border-radius:15px;backdrop-filter:blur(10px);border:1px solid rgba(255,87,34,.3)}.header h1{font-size:2.5em;margin-bottom:10px;background:linear-gradient(45deg,#FF5722,#FFC107);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 10px rgba(255,87,34,.3)}.streak-list{display:grid;gap:20px}.streak-card{background:rgba(0,0,0,.6);border-radius:15px;padding:20px;transition:.3s;border:1px solid rgba(255,87,34,.3);position:relative}.streak-card:hover{transform:translateY(-5px)}.streak-card::before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#FF5722,#FFC107);animation:flame 2s infinite}.streak-info{display:flex;justify-content:space-between;align-items:center}.streak-count{font-size:2em;font-weight:700;color:#FF5722;text-shadow:0 0 10px rgba(255,87,34,.5)}.user-pair{font-size:1.2em;margin-bottom:10px}.last-message{color:#aaa;font-size:.9em;margin-bottom:15px}.loading{text-align:center;padding:20px;font-size:1.2em;color:#FFC107}.error{background:rgba(255,0,0,.2);padding:15px;border-radius:10px;margin:10px 0;border:1px solid rgba(255,0,0,.3)}.empty-state{text-align:center;padding:40px 20px;background:rgba(0,0,0,.4);border-radius:15px;border:1px solid rgba(255,87,34,.2)}.empty-state p{color:#aaa;margin-top:10px}@keyframes flame{0%{transform:scaleX(1)}50%{transform:scaleX(.95)}100%{transform:scaleX(1)}}@media (max-width:600px){.container{padding:10px}.header h1{font-size:2em}.streak-card{padding:15px}}</style></head><body><div class="container"><div class="header"><h1>üî• StreakBuddy</h1><p>–í–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∏–∫–∏</p></div><div id="error" style="display:none" class="error"></div><div class="streak-list" id="streakList"><div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∏–∫–æ–≤...</div></div></div><script>const tg=window.Telegram.WebApp;tg.expand();async function fetchStreaks(){const e=document.getElementById("error"),t=document.getElementById("streakList");try{const s=await fetch(`/api/streaks?user_id=${tg.initDataUnsafe.user.id}`);if(!s.ok){const r=await s.json();throw new Error(r.error||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö")}const n=await s.json();updateStreaks(n.streaks)}catch(s){e.style.display="block",e.textContent=`–û—à–∏–±–∫–∞: ${s.message}`,t.innerHTML=""}}function createStreakCard(e){const t=new Date(e.last_message).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return`<div class="streak-card"><div class="streak-info"><div class="user-pair">${e.user1} ü§ù ${e.user2}</div><div class="streak-count">${e.count}üî•</div></div><div class="last-message">–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: ${t}</div></div>`}function updateStreaks(e){const t=document.getElementById("streakList");e&&e.length>0?t.innerHTML=e.map(createStreakCard).join(""):t.innerHTML=`<div class="empty-state"><h2>–°—Ç—Ä–∏–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h2><p>–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–∞—Ç—å—Å—è –≤ Telegram, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∏–∫–∏!</p></div>`}if(tg.initDataUnsafe&&tg.initDataUnsafe.user){fetchStreaks()}else{document.getElementById("error").style.display="block",document.getElementById("error").textContent="–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}</script></body></html>
